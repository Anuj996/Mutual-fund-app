{"ast":null,"code":"import{useParams}from\"react-router-dom\";import{useEffect,useState,useContext}from\"react\";import{AuthContext}from\"../context/AuthProvider\";import{baseURL}from\"../config\";// ✅ import live backend URL\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function FundDetailsPage(){const{code}=useParams();const[fund,setFund]=useState(null);const{token}=useContext(AuthContext);useEffect(()=>{fetch(\"https://api.mfapi.in/mf/\".concat(code)).then(res=>res.json()).then(setFund);},[code]);const saveFund=async()=>{var _fund$data,_fund$data$;const token=localStorage.getItem(\"token\");if(!token){alert(\"You must be logged in to save a fund.\");return;}const latestNav=((_fund$data=fund.data)===null||_fund$data===void 0?void 0:(_fund$data$=_fund$data[0])===null||_fund$data$===void 0?void 0:_fund$data$.nav)||\"0\";try{const res=await fetch(\"\".concat(baseURL,\"/api/funds/save\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)},body:JSON.stringify({schemeCode:code,schemeName:fund.meta.scheme_name,nav:latestNav})});const data=await res.json();if(res.ok){alert(\"✅ Fund saved successfully!\");}else{alert(data.message||\"❌ Failed to save fund.\");}}catch(err){console.error(\"Save fund error:\",err);alert(\"❌ Something went wrong. Please try again later.\");}};if(!fund)return/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-10\",children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-4\",children:fund.meta.scheme_name}),/*#__PURE__*/_jsx(\"button\",{onClick:saveFund,className:\"bg-green-600 text-white px-4 py-2 rounded\",children:\"Save Fund\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold\",children:\"NAV History:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"mt-2 space-y-1\",children:fund.data.slice(0,5).map((entry,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"text-sm\",children:[entry.date,\": \\u20B9\",entry.nav]},index))})]})]});}","map":{"version":3,"names":["useParams","useEffect","useState","useContext","AuthContext","baseURL","jsx","_jsx","jsxs","_jsxs","FundDetailsPage","code","fund","setFund","token","fetch","concat","then","res","json","saveFund","_fund$data","_fund$data$","localStorage","getItem","alert","latestNav","data","nav","method","headers","body","JSON","stringify","schemeCode","schemeName","meta","scheme_name","ok","message","err","console","error","className","children","onClick","slice","map","entry","index","date"],"sources":["C:/project/Mutual fund App/frontend/src/pages/FundDetailsPage.js"],"sourcesContent":["import { useParams } from \"react-router-dom\";\nimport { useEffect, useState, useContext } from \"react\";\nimport { AuthContext } from \"../context/AuthProvider\";\nimport { baseURL } from \"../config\"; // ✅ import live backend URL\n\nexport default function FundDetailsPage() {\n  const { code } = useParams();\n  const [fund, setFund] = useState(null);\n  const { token } = useContext(AuthContext);\n\n  useEffect(() => {\n    fetch(`https://api.mfapi.in/mf/${code}`)\n      .then((res) => res.json())\n      .then(setFund);\n  }, [code]);\n\n  const saveFund = async () => {\n    const token = localStorage.getItem(\"token\");\n\n    if (!token) {\n      alert(\"You must be logged in to save a fund.\");\n      return;\n    }\n\n    const latestNav = fund.data?.[0]?.nav || \"0\";\n\n    try {\n      const res = await fetch(`${baseURL}/api/funds/save`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          schemeCode: code,\n          schemeName: fund.meta.scheme_name,\n          nav: latestNav,\n        }),\n      });\n\n      const data = await res.json();\n\n      if (res.ok) {\n        alert(\"✅ Fund saved successfully!\");\n      } else {\n        alert(data.message || \"❌ Failed to save fund.\");\n      }\n    } catch (err) {\n      console.error(\"Save fund error:\", err);\n      alert(\"❌ Something went wrong. Please try again later.\");\n    }\n  };\n\n  if (!fund) return <div className=\"text-center mt-10\">Loading...</div>;\n\n  return (\n    <div className=\"p-8\">\n      <h1 className=\"text-2xl font-bold mb-4\">{fund.meta.scheme_name}</h1>\n      <button onClick={saveFund} className=\"bg-green-600 text-white px-4 py-2 rounded\">\n        Save Fund\n      </button>\n      <div className=\"mt-4\">\n        <h2 className=\"text-lg font-semibold\">NAV History:</h2>\n        <ul className=\"mt-2 space-y-1\">\n          {fund.data.slice(0, 5).map((entry, index) => (\n            <li key={index} className=\"text-sm\">\n              {entry.date}: ₹{entry.nav}\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}